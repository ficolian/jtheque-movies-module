<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jtheque="http://www.jtheque.com/schema/jtheque"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/util 
            http://www.springframework.org/schema/util/spring-util.xsd
            http://www.jtheque.com/schema/jtheque
            http://www.jtheque.com/schema/jtheque/jtheque.xsd"
       default-lazy-init="true">

    <bean id="moviesModule" class="org.jtheque.movies.MoviesModule" lazy-init="false">
        <constructor-arg index="0">
            <util:list>
                <bean class="org.jtheque.movies.views.impl.choiceActions.ModifyChoiceAction"/>
                <bean class="org.jtheque.movies.views.impl.choiceActions.DeleteChoiceAction"/>
                <bean class="org.jtheque.movies.views.impl.choiceActions.CleanChoiceAction"/>
            </util:list>
        </constructor-arg>
        <constructor-arg index="1">
            <util:list>
                <bean class="org.jtheque.movies.views.impl.sort.ByCategorySorter"/>
                <bean class="org.jtheque.movies.views.impl.sort.NoneSorter"/>
            </util:list>
        </constructor-arg>
        <constructor-arg index="2">
            <jtheque:swing-bean class="org.jtheque.movies.views.impl.JPanelConfigOpening"/>
        </constructor-arg>
    </bean>

    <bean id="categoryController" class="org.jtheque.movies.controllers.impl.CategoryController"/>

    <bean id="movieController" class="org.jtheque.movies.controllers.impl.MovieController">
        <property name="viewState">
            <bean class="org.jtheque.movies.controllers.impl.states.ViewMovieState"/>
        </property>
        <property name="newObjectState">
            <bean class="org.jtheque.movies.controllers.impl.states.CreateMovieState"/>
        </property>
        <property name="modifyState">
            <bean class="org.jtheque.movies.controllers.impl.states.ModifyMovieState"/>
        </property>
    </bean>

    <bean id="daoCategories" class="org.jtheque.movies.persistence.dao.impl.DaoCategories"/>
    <bean id="daoMovies" class="org.jtheque.movies.persistence.dao.impl.DaoMovies"/>

    <bean id="categoriesService" class="org.jtheque.movies.services.impl.CategoriesService"/>
    <bean id="moviesService" class="org.jtheque.movies.services.impl.MoviesService"/>
    <bean id="filesService" class="org.jtheque.movies.services.impl.FilesService"/>

    <jtheque:proxy id="movieView" type="org.jtheque.movies.views.impl.MovieView"/>
    <jtheque:proxy id="categoryView" type="org.jtheque.movies.views.impl.CategoryView"/>
    <jtheque:proxy id="addFromFileView" type="org.jtheque.movies.views.impl.frames.AddFromFileView"/>
    <jtheque:proxy id="importFolderView" type="org.jtheque.movies.views.impl.frames.ImportFolderView"/>
    <jtheque:proxy id="cleanMovieView" type="org.jtheque.movies.views.impl.frames.CleanMovieView"/>

    <bean id="_movieView" class="org.jtheque.movies.views.impl.MovieView" />

    <bean id="_categoryView" class="org.jtheque.movies.views.impl.CategoryView">
        <constructor-arg ref="_mainView"/>
    </bean>

    <bean id="_addFromFileView" class="org.jtheque.movies.views.impl.frames.AddFromFileView">
        <constructor-arg ref="_mainView"/>
        <constructor-arg ref="fileParsers"/>
    </bean>

    <bean id="_importFolderView" class="org.jtheque.movies.views.impl.frames.ImportFolderView">
        <constructor-arg ref="_mainView"/>
        <constructor-arg ref="fileParsers"/>
    </bean>

    <util:list id="fileParsers">
        <bean class="org.jtheque.movies.services.impl.parsers.FolderCategoryParser"/>
        <bean class="org.jtheque.movies.services.impl.parsers.ToCharCategoryParser">
            <constructor-arg value="-"/>
        </bean>
        <bean class="org.jtheque.movies.services.impl.parsers.BetweenCharCategoryParser">
            <constructor-arg value="["/>
            <constructor-arg value="]"/>
        </bean>
        <bean class="org.jtheque.movies.services.impl.parsers.BetweenCharCategoryParser">
            <constructor-arg value="{"/>
            <constructor-arg value="}"/>
        </bean>
    </util:list>

    <bean id="_cleanMovieView" class="org.jtheque.movies.views.impl.frames.CleanMovieView">
        <constructor-arg ref="_mainView"/>
        <constructor-arg ref="nameCleaners"/>
    </bean>

    <util:list id="nameCleaners">
        <bean class="org.jtheque.movies.services.impl.cleaners.CategoryNameCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.NumberCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.ExtensionCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.CharCleaner">
            <constructor-arg value="-"/>
        </bean>
    </util:list>

    <jtheque:display id="importFolderAction" key="movie.auto.folder.actions.add" view="importFolderView"/>

    <bean id="cleanCategoryAction" class="org.jtheque.movies.views.impl.actions.clean.AcCleanCategory"/>

</beans>