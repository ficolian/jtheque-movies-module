<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jtheque="http://www.jtheque.com/schema/jtheque"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/util 
            http://www.springframework.org/schema/util/spring-util.xsd
            http://www.jtheque.com/schema/jtheque
            http://www.jtheque.com/schema/jtheque/jtheque.xsd"
       default-lazy-init="true">

    <bean id="moviesModule" class="org.jtheque.movies.MoviesModule" lazy-init="false">
        <constructor-arg index="0">
            <util:list>
                <bean class="org.jtheque.movies.views.impl.choice.ModifyChoiceAction"/>
                <bean class="org.jtheque.movies.views.impl.choice.DeleteChoiceAction"/>
                <bean class="org.jtheque.movies.views.impl.choice.CleanChoiceAction"/>
            </util:list>
        </constructor-arg>
        <constructor-arg index="1">
            <jtheque:swing-bean class="org.jtheque.movies.views.impl.JPanelConfigMovies"/>
        </constructor-arg>
    </bean>

    <bean id="addFromFileController" class="org.jtheque.movies.controllers.impl.AddFromFileController"/>
    <bean id="categoryController" class="org.jtheque.movies.controllers.impl.CategoryController"/>
    <bean id="imageController" class="org.jtheque.movies.controllers.impl.ImageController"/>
    <bean id="cleanController" class="org.jtheque.movies.controllers.impl.CleanController"/>
    <bean id="filesController" class="org.jtheque.movies.controllers.impl.FilesController"/>
    <bean id="generateInfosController" class="org.jtheque.movies.controllers.impl.GenerateInfosController"/>

    <bean id="movieController" class="org.jtheque.movies.controllers.impl.MovieController">
        <constructor-arg>
            <bean class="org.jtheque.movies.controllers.impl.states.ViewMovieState"/>
        </constructor-arg>
        <constructor-arg>
            <bean class="org.jtheque.movies.controllers.impl.states.ModifyMovieState"/>
        </constructor-arg>
        <constructor-arg>
            <bean class="org.jtheque.movies.controllers.impl.states.CreateMovieState"/>
        </constructor-arg>
        <constructor-arg>
            <null/>
        </constructor-arg>
    </bean>

    <bean id="daoCategories" class="org.jtheque.movies.persistence.dao.impl.DaoCategories"/>
    <bean id="daoMovies" class="org.jtheque.movies.persistence.dao.impl.DaoMovies"/>

    <bean id="categoriesService" class="org.jtheque.movies.services.impl.CategoriesService" lazy-init="false"/>
    <bean id="moviesService" class="org.jtheque.movies.services.impl.MoviesService" lazy-init="false"/>
    <bean id="ffmpegService" class="org.jtheque.movies.services.impl.FFMpegService"/>
    <bean id="filesService" class="org.jtheque.movies.services.impl.FilesService"/>

    <jtheque:proxy id="movieView" type="org.jtheque.movies.views.impl.MovieView"/>
    <jtheque:proxy id="categoryView" type="org.jtheque.movies.views.impl.frames.CategoryView"/>
    <jtheque:proxy id="addFromFileView" type="org.jtheque.movies.views.impl.frames.AddFromFileView"/>
    <jtheque:proxy id="importFolderView" type="org.jtheque.movies.views.impl.frames.ImportFolderView"/>
    <jtheque:proxy id="cleanMovieView" type="org.jtheque.movies.views.impl.frames.CleanView"/>
    <jtheque:proxy id="imageView" type="org.jtheque.movies.views.impl.frames.ImageView"/>
    <jtheque:proxy id="generateInfosView" type="org.jtheque.movies.views.impl.frames.GenerateInfosView"/>
    <jtheque:proxy id="filesView" type="org.jtheque.movies.views.impl.frames.FilesView"/>

    <bean id="_movieView" class="org.jtheque.movies.views.impl.MovieView"/>
    <bean id="_filesView" class="org.jtheque.movies.views.impl.frames.FilesView"/>
    <bean id="_categoryView" class="org.jtheque.movies.views.impl.frames.CategoryView"/>
    <bean id="_generateInfosView" class="org.jtheque.movies.views.impl.frames.GenerateInfosView"/>

    <bean id="_addFromFileView" class="org.jtheque.movies.views.impl.frames.AddFromFileView">
        <constructor-arg ref="fileParsers"/>
    </bean>

    <bean id="_importFolderView" class="org.jtheque.movies.views.impl.frames.ImportFolderView">
        <constructor-arg ref="fileParsers"/>
    </bean>

    <bean id="_cleanMovieView" class="org.jtheque.movies.views.impl.frames.CleanView">
        <constructor-arg ref="nameCleaners"/>
    </bean>

    <util:list id="fileParsers">
        <bean class="org.jtheque.movies.services.impl.parsers.StaticCategoryParser"/>
        <bean class="org.jtheque.movies.services.impl.parsers.FolderCategoryParser"/>
        <bean class="org.jtheque.movies.services.impl.parsers.ToCharCategoryParser">
            <constructor-arg value="-"/>
        </bean>
        <bean class="org.jtheque.movies.services.impl.parsers.BetweenCharCategoryParser">
            <constructor-arg value="["/>
            <constructor-arg value="]"/>
        </bean>
        <bean class="org.jtheque.movies.services.impl.parsers.BetweenCharCategoryParser">
            <constructor-arg value="{"/>
            <constructor-arg value="}"/>
        </bean>
    </util:list>

    <util:list id="nameCleaners">
        <bean class="org.jtheque.movies.services.impl.cleaners.CategoryNameCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.NumberCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.ExtensionCleaner"/>
        <bean class="org.jtheque.movies.services.impl.cleaners.CharCleaner">
            <constructor-arg value="-"/>
        </bean>
    </util:list>

    <bean id="_imageView" class="org.jtheque.movies.views.impl.frames.ImageView"/>
</beans>